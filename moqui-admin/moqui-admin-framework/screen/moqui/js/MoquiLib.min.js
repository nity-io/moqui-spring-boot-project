var moqui={isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isPlainObject:function(a){return null!=a&&"object"==typeof a&&"[object Object]"===Object.prototype.toString.call(a)},htmlEncode:function(a){return $("\x3cdiv/\x3e").text(a).html()},
htmlDecode:function(a){return $("\x3cdiv/\x3e").html(a).text()},debounce:function(a,d){var c,b;return function(){var e=this,f=arguments;clearTimeout(c);c=setTimeout(function(){c=null;b=a.apply(e,f)},d);return b}},makeColumnsConsistent:function(a){a=$("#"+a+" table");var d=[],c,b,e,f;for(c=0;c<a.length;c++)if(b=a[c],b.rows&&0!==b.rows.length){f=0;for(e=b.rows[f];5>f&&f<b.rows.length;)if((!e.cells||1>=e.cells.length)&&b.rows.length>f+1)f++,e=b.rows[f];else break;if(e.cells&&0!==e.cells.length)for(b=
0;b<e.cells.length;b++){var g=$(e.cells[b]).width();if(!d[b]||d[b]<g)d[b]=g}}e=d.length;for(c=b=0;c<e;c++)b+=d[c];g=[];for(c=0;c<e;c++)g[c]=100*d[c]/b;for(c=0;c<a.length;c++)if(b=a[c],b.rows&&0!==b.rows.length){f=0;for(e=b.rows[f];5>f&&f<b.rows.length;)if((!e.cells||1>=e.cells.length)&&b.rows.length>f+1)f++,e=b.rows[f];else break;if(e.cells&&0!==e.cells.length)for(b=0;b<e.cells.length;b++)e.cells[b].style.width=g[b]+"%"}},downloadData:function(a,d,c){a=new Blob([a],{type:c});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,
d);else{var b=document.createElement("a"),e=URL.createObjectURL(a);b.href=e;b.download=d;document.body.appendChild(b);b.click();setTimeout(function(){document.body.removeChild(b);window.URL.revokeObjectURL(e)},0)}},notifyNotification:function(a,d){if(a){var c={};a.topic&&a.topic.length&&(c.tag=a.topic);if(window.Notification&&"granted"===Notification.permission){var b=new Notification(a.title,c);a.link&&a.link.length&&(b.onclick=function(){window.open(a.link)});moqui.webrootVue&&moqui.webrootVue.addNotify(a.title,
a.type)}else window.Notification&&"denied"!==Notification.permission?Notification.requestPermission(function(b){"granted"===b?(b=new Notification(a.title,c),a.link&&a.link.length&&(b.onclick=function(){window.open(a.link)}),moqui.webrootVue&&moqui.webrootVue.addNotify(a.title,a.type)):d(a)}):d(a)}},NotifyOptions:function(a,d,c,b){this.message=moqui.htmlEncode(a);d&&(this.url=d);this.icon=b?b:"success"===c?"glyphicon glyphicon-ok-sign":"warning"===c?"glyphicon glyphicon-warning-sign":"danger"===c?
"glyphicon glyphicon-exclamation-sign":"glyphicon glyphicon-info-sign"},NotifySettings:function(a){this.delay=4E3;this.offset={x:20,y:60};this.placement={from:"top",align:"right"};this.animate={enter:"animated fadeInDown",exit:""};this.type=a?a:"info";this.template='\x3cdiv data-notify\x3d"container" class\x3d"notify-container col-xs-11 col-sm-3 alert alert-{0}" role\x3d"alert"\x3e\x3cbutton type\x3d"button" aria-hidden\x3d"true" class\x3d"close" data-notify\x3d"dismiss"\x3e\x26times;\x3c/button\x3e\x3cspan data-notify\x3d"icon"\x3e\x3c/span\x3e \x3cspan data-notify\x3d"message"\x3e{2}\x3c/span\x3e\x3ca href\x3d"{3}" target\x3d"{4}" data-notify\x3d"url"\x3e\x3c/a\x3e\x3c/div\x3e'},
notifyGrowl:function(a){a&&($.notify(new moqui.NotifyOptions(a.title,a.link,a.type,a.icon),new moqui.NotifySettings(a.type)),moqui.webrootVue&&moqui.webrootVue.addNotify(a.title,a.type))},NotificationClient:function(a){this.displayEnable=!0;this.webSocketUrl=a;this.topicListeners={};this.disableDisplay=function(){this.displayEnable=!1};this.enableDisplay=function(){this.displayEnable=!0};this.initWebSocket=function(){this.webSocket=new WebSocket(this.webSocketUrl);this.webSocket.clientObj=this;this.webSocket.onopen=
function(a){this.clientObj.tryReopenCount=0;a=[];for(var c in this.clientObj.topicListeners)a.push(c);this.send("subscribe:"+a.join(","))};this.webSocket.onmessage=function(a){var c=JSON.parse(a.data);(a=this.clientObj.topicListeners[c.topic])&&a.forEach(function(a){a(c,this)},this);(a=this.clientObj.topicListeners.ALL)&&a.forEach(function(a){a(c,this)},this)};this.webSocket.onclose=function(a){console.log(a);setTimeout(this.clientObj.tryReopen,3E4,this.clientObj)};this.webSocket.onerror=function(a){console.log(a)}};
this.tryReopen=function(a){a.webSocket&&a.webSocket.readyState!==WebSocket.CLOSED&&a.webSocket.readyState!==WebSocket.CLOSING||a.tryReopenCount&&!(6>a.tryReopenCount)||(console.log("Trying WebSocket reopen, count "+a.tryReopenCount),a.tryReopenCount=(a.tryReopenCount||0)+1,a.initWebSocket())};this.displayNotify=function(a,c){c.clientObj.displayEnable&&a.title&&!0===a.showAlert&&moqui.notifyNotification(a,moqui.notifyGrowl)};this.registerListener=function(a,c){this.webSocket||this.initWebSocket();
c||(c=this.displayNotify);var b=this.topicListeners[a];b||(b=[],this.topicListeners[a]=b,this.webSocket.readyState===WebSocket.OPEN&&this.webSocket.send("subscribe:"+a));0>b.indexOf(c)&&b.push(c)}},LruMap:function(a){this.limit=a;this.valueMap={};this.lruList=[];this.put=function(a,c){var b=this.lruList,e=this.valueMap;e[a]=c;for(this._keyUsed(a);b.length>this.limit;){var f=b.pop();e[f]=null}};this.get=function(a){var c=this.valueMap[a];c&&this._keyUsed(a);return c};this.containsKey=function(a){return!!this.valueMap[a]};
this._keyUsed=function(a){for(var c=this.lruList,b=-1,e=0;e<c.length;e++)if(c[e]===a){b=e;break}0<=b&&c.splice(b,1);c.unshift(a)}}};
$.fn.select2&&($.fn.select2.defaults.set("theme","bootstrap"),$.fn.select2.defaults.set("minimumResultsForSearch","10"),$.fn.select2.defaults.set("dropdownAutoWidth",!0),$.fn.select2.amd.require(["select2/selection/search"],function(a){var d=a.prototype.searchRemoveChoice;a.prototype.searchRemoveChoice=function(){d.apply(this,arguments);this.$search.val("")}}),$.fn.select2.defaults.set("selectOnClose",!0),$(function(){$(".select2-hidden-accessible").on("select2:select",function(a){$(this).valid()})}),
$.fn.modal&&($.fn.modal.Constructor.prototype.enforceFocus=function(){}));
$.validator&&($.validator.setDefaults({errorPlacement:function(a,d){d.parent(".twitter-typeahead").length?a.insertAfter(d.parent()):d.parent(".input-group").length?a.insertAfter(d.parent()):d.hasClass("select2-hidden-accessible")?a.insertAfter(d.next("span")):a.insertAfter(d)}}),$.validator.prototype.errorsFor=function(a){a=this.escapeCssMeta(this.idOrName(a));var d="label[for\x3d'"+a+"'], label[for\x3d'"+a+"'] *";"label"!==this.settings.errorElement&&(d=d+", #"+a+"-error");return this.errors().filter(d)},
$.validator.prototype.errors=function(){var a=this.settings.errorClass.split(" ").join(".");return this.errorContext.is&&this.errorContext.is("form")?$(this.currentForm.elements).parents().parents().find(this.settings.errorElement+"."+a):$(this.settings.errorElement+"."+a,this.errorContext)},$.validator.prototype.elements=function(){var a=this,d={};return $(this.currentForm.elements).filter(":input, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var c=
this.name||$(this).attr("name");!c&&window.console&&console.error("%o has no name assigned",this);this.hasAttribute("contenteditable")&&(this.form=$(this).closest("form")[0],this.name=c);return c in d||!a.objectLength($(this).rules())?!1:d[c]=!0})},$.validator.prototype.init=function(){function a(a){!this.form&&this.hasAttribute("contenteditable")&&(this.form=$(this).closest("form")[0],this.name=$(this).attr("name"));var b=$.data(this.form,"validator"),c="on"+a.type.replace(/^validate/,""),d=b.settings;
d[c]&&!$(this).is(d.ignore)&&d[c].call(b,this,a)}this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=this.groups={},c;$.each(this.settings.groups,function(a,b){"string"===typeof b&&(b=b.split(/\s/));$.each(b,function(b,
c){d[c]=a})});c=this.settings.rules;$.each(c,function(a,b){c[a]=$.validator.normalizeRule(b)});var b=$(this.currentForm.elements).filter(":input, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore);b.on("focusin.validate focusout.validate keyup.validate",a);b.on("click.validate","select, option, [type\x3d'radio'], [type\x3d'checkbox']",a)});
window.Inputmask&&Inputmask.extendAliases({"yyyy-mm-dd hh:mm":{mask:"y-1-2 h:s",placeholder:"yyyy-mm-dd hh:mm",alias:"datetime",separator:"-",leapday:"-02-29",regex:{val2pre:function(a){a=Inputmask.escapeRegex.call(this,a);return new RegExp("((0[13-9]|1[012])"+a+"[0-3])|(02"+a+"[0-2])")},val2:function(a){a=Inputmask.escapeRegex.call(this,a);return new RegExp("((0[1-9]|1[012])"+a+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+a+"30)|((0[13578]|1[02])"+a+"31)")},val1pre:/[01]/,val1:/0[1-9]|1[012]/},onKeyDown:function(a,
d,c,b){}}});